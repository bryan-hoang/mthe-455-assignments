% Provides macros manipulating strings of tokens.
\RequirePackage{xstring}

% Store the jobname as a string with category 11 characters.
\edef\normaljobname{\expandafter\scantokens\expandafter{\jobname\noexpand}}
\StrBetween{\normaljobname}{asgmt-}{-q}[\assignmentnumber]
\StrBehind{\normaljobname}{-q-}[\questionnumber]

\documentclass[
  coursecode={MTHE 455},
  assignmentname={Assignment \assignmentnumber},
  studentnumber=20053722,
  name={Bryan Hoang}
]{
  ltxanswer%
}

\usepackage{bch-style}

\begin{document}
  \begin{questions}
    \setcounter{question}{\questionnumber}
    \addtocounter{question}{-1}
    \question\
    \begin{parts}
      \part{}
      \begin{solution}
        \begin{proof}
          \begin{align*}
             &\phantomeq{} \expect{g(X,Y)|Y=y}                                                                             \\
             &= \sum_{a \in S_{X}} \sum_{b \in S_{Y}} g(a,b) P(X=a,Y=b|Y=y)                                                \\
             &= \sum_{a \in S_{X}} g(a,b) P(X=a,Y=y|Y=y)                    & &\because P(X=a,Y=b|Y=y)=0, \forall b \neq y \\
             &= \sum_{a \in S_{X}} g(a,y) P(X=a|Y=y)                                                                       \\
             &= \expect{g(X,y)|Y=y}
          \end{align*}
        \end{proof}
      \end{solution}

      \part{}
      \begin{solution}
        \begin{proof}
          \begin{align*}
             &\phantomeq{} \expect{XY|Y=y}                                                                            \\
             &= \sum_{a \in S_{X}} \sum_{b \in S_{Y}} abP(X=a,Y=b|Y=y)                                                \\
             &= \sum_{a \in S_{X}} ayP(X=a,Y=y|Y=y)                    & &\because P(X=a,Y=b|Y=y)=0, \forall b \neq y \\
             &= y\sum_{a \in S_{X}} aP(X=a|Y=y)                                                                       \\
             &= y\expect{X|Y=y}
          \end{align*}
        \end{proof}
      \end{solution}

      \newpage

      \part{}
      \begin{solution}
        \begin{proof}
          \begin{align*}
             &\phantomeq{} \expect{Y\expect{X|Y}}                                      \\
             &= \sum_{b \in S_{Y}} b\left(\sum_{a \in S_{X}} aP(X=a|Y=b)\right) P(Y=b) \\
             &= \sum_{b \in S_{Y}} \left(\sum_{a \in S_{X}} abP(X=a|Y=b)P(Y=b)\right)  \\
             &= \sum_{a \in S_{X}} \sum_{b \in S_{Y}} abP(X=a,Y=b)                     \\
             &= \expect{X|Y}
          \end{align*}
        \end{proof}
      \end{solution}
    \end{parts}
  \end{questions}
\end{document}
